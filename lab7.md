# 7. Статический контекст. Интерфейсы

## Статический и нестатический контекст

Нестатические поля и методы относятся к экземплярам класса. Статические поля и методы относятся к самому классу. Статические поля и методы объявляются с ключевым словом `static`. Статические методы имеют доступ только к другим статическим полям и методам.

```java
import java.awt.*;

public class Rectangle extends Shape implements Scalable {
    // Минимальные и максимальные значения ширины и высоты
    public static final int MIN_WIDTH = 1; int MAX_WIDTH = 1000;
    public static final int MIN_HEIGHT = 1; int MAX_HEIGHT = 1000;

    // Ширина и высота
    private int width = MIN_WIDTH, height = MIN_HEIGHT;

    // Методы доступа 
    public int getWidth() {
        return width;
    }
    public void setWidth(int width) {
        if (width >= MIN_WIDTH && width <= MAX_WIDTH)
            this.width = width;
    }
    public int getHeight() {
        return height;
    }
    public void setHeight(int height) {
        if (height >= MIN_HEIGHT && height <= MAX_HEIGHT)
            this.height = height;
    }

    // Конструктор
    public Rectangle(int x, int y, int width, int height, Color color) {
        super(x, y, color);
        setWidth(width);
        setHeight(height);
    }

    // Нарисовать прямоугольник в графическом контексте
    public void draw(Graphics g) {
        g.setColor(getColor());
        g.fillRect(getX(), getY(), width, height);
    }

    // Скопировать заданный прямоугольник
    public static Rectangle copy(Rectangle rect) {
        return new Rectangle(rect.getX(), rect.getY(),
                rect.width, rect.height, rect.getColor());
    }

    // Создать эллипс вписанный в заданный прямоугольник
    public static Ellipse toEllipse(Rectangle rect) {
        return new Ellipse(rect.getX(), rect.getY(),
                rect.width, rect.height, rect.getColor());
    }
}
```

Открытые статические поля и методы доступны без создания объектов. Вызвать статические методы вне класса, в котором они объявлены, можно через имя класса.

```java
public class MyMainClass {
    public static void main(String[] args) {
        // Создать прямоугольник
        Rectangle rect = new Rectangle(0,0, 50, 100, Color.GRAY);
        // Создать эллипс, вызвав статический метод
        Ellipse ellipse = Rectangle.toEllipse(rect);
    }
}
```

### Интерфейсы

_Интерфейс_ — спецификация поведения объектов (только объявления методов).

Интерфейс объявляется с помощью ключевого слова `interface`. Интерфейс содержит абстрактные методы (ключевое слово `abstract` указывать необязательно).

```java
public interface Scalable {
    // Минимальное м максимальное значение множителя масштабирования
    float MIN_FACTOR = 0.01F, MAX_FACTOR = 100.0F;
    
    // Масштабировать ширину и высоту пропорционально
    void scale(float factor);
    // Масштабировать ширину и высоту раздельно
    void scale(float wFactor, float hFactor);
}
```

Интерфейс может включать открытые статические завершенные переменные (глобальные константы). При этом ключевые слова `public`, `static`, и `final` в объявлении таких констант необязательно.

Интерфейс может быть реализован в классе. Объявление класса включает ключевое слово `implements`, после которого через запятую перечисляются имена реализуемых интерфейсов. Все абстрактные методы, объявленные в этих интерфейсах, должны быть переопределены в классе.

```java
import java.awt.*;

public class Rectangle extends Shape implements Scalable {
    // Ширина и высота
    private int width, height;
    
    // Методы доступа 
    // Конструктор

    // Переопределение абстрактных методов

    public void scale(float factor) {
        scale(factor, factor);
    }

    public void scale(float wFactor, float hFactor) {
        setWidth(Math.round(width * wFactor));
        setHeight(Math.round(height * hFactor));
    }

    // ...
}
```

## Задание

**Часть I**

- Разработать абстрактный класс «Shape» для представления графических фигур с абстрактным метод рисования на графическом контексте.
- 
- Разработать интерфейс «Scalable», определяющий поведения масштабируемых графических фигур: в интерфейсе должны быть определены абстрактные методы масштабирования, глобальные константы, определяющие минимальное и максимальное значение коэффициента масштабирования.  

- Разработать класс «Rectangle», унаследованный от класса «Shape», для представления прямоугольников: класс должен реализовывать абстрактные методы интерфейса «Scalable». Переопределенные методы интерфейса «Scalable» должны выполнять валидацию передаваемых параметров с учетом минимального и максимального значения коэффициента масштабирования.

**Часть II**

- Разработать интерфейс «Rotatable», определяющий поведения поворачиваемых графических фигур: в интерфейсе должны быть определены абстрактные методы поворота фигуры на заданный угол, глобальные константы, определяющие минимальное и максимальное значение угла поворота.

- Разработать класс «Ellipse», унаследованный от класса «Shape», для представления эллипсов: класс должен реализовывать абстрактные методов интерфейсов «Scalable» и «Rotatable». Переопределенные методы интерфейса «Scalable» должны выполнять валидацию передаваемых параметров с учетом минимального и максимального значения Переопределенные методы интерфейса «Scalable» должны выполнять валидацию передаваемых параметров с учетом минимального и максимального значения коэффициента масштабирования. Переопределенные методы интерфейса «Rotatable» должны выполнять валидацию передаваемых параметров с учетом минимального и максимального значения угла поворота.

- Дополнить класс «Rectangle» статическим методом создания вписанного эллипса.
Дополнить класс «Ellipse» статическим методом создания охватывающего прямоугольника.

- Разработать программу позволяющую создавать и рисовать (в графическом файле) прямоугольники и эллипсы с возможностью их масштабирования и поворота.

- Создать серию изображений одного массива графических фигур с поворотами на 0&deg;, 45&deg;, 90&deg; и масштабами 50%, 100%, 200%.

**Часть III**

- Разработать класс статических методов, реализующих операции над матрицами: транспонирование, сложение двух матриц, умножение матрицы на число.

## Вопросы

1.	Абстрактные методы
2.	Переопределение методов
3.	Интерфейсы
4.	Расширение интерфейсов
5.	Реализация интерфейсов
6.	Принципы ООП: Полиморфизм
7.	Приведение ссылочных типов данных
8.	Статические поля и методы

## Ресурсы

1. Г. Шилдт. Java Руководство для начинающих. Главы 7-8
