# 6. Классы и объекты (продолжение)

## Методические указания

### Абстрактные классы

Абстрактный метод не имеет реализации; объявляется с ключевым словом `abstract`. Если в классе объявлен абстрактный метод, то и сам класс должен быть объявлен как абстрактный с помощью ключевого слова `abstract`. Абстрактный класс не может иметь объектов; представляет абстрактные сущности.
```java
import java.awt.*;

// Абстрактный класс

public abstract class Shape {
    // Координаты базовой точки
    int x, y;
    // Цвет
    Color color;

    // Конструктор
    Shape(int x, int y, Color color) {
        this.x = x;
        this.y = y;
        this.color = color;
    }

    // Переместить фигуру
    void move(int x, int y) {
        this.x = x;
        this.y = y;
    }

    // Абстрактные методы

    // Вычислить площадь фигуры
    abstract int area();
    
    // Нарисовать фигуру в графическом контексте
    abstract void draw(Graphics g);
}
```

### Наследование (расширение) классов

_Наследования классов_ — отношение между двумя классами, в котором один специализированный класс (_подкласс_) расширяет другой общий класс (_суперкласс_) дополнительными полями и методами.

_Суперкласс_ — общий класс, от которого производится наследование (расширение).

_Подкласс_ — специализированный класс, который наследует (расширяет) общий класс.

Объекты подкласса обладают состоянием и поведением определенным совместно суперклассом и подклассом.

Для того чтобы один класс наследовал другой, необходимо в его объявлении указать суперкласс после ключевого слова `extends`. Доступные поля и методы суперкласса могут использоваться в подклассе как собственные.
```java
import java.awt.*;

public class Rectangle extends Shape {
    // Поля
    int width, height;

    // Конструктор
    Rectangle(int x, int y, int width, int height, Color color) {
        super(x, y, color); // Обязательный вызов конструктора суперкласса
        this.width = width;
        this.height = height;
    }

    // Переопределение абстрактных методов

    // Вычислить площадь
    int area() {
        return width * height;
    }

    // Нарисовать прямоугольник в графическом контексте
    void draw(Graphics g) {
        g.setColor(color);
        g.fillRect(x, y, width, height);
    }
}
```

### Полиморфизм

_Полиморфизм_ — «один интерфейс, множество реализаций».

Полиморфизм связан с наследованием, т.к. наследование позволяет переопределять методы. Например, создадим суперкласс `Shape` с методом `draw`.
```java
public abstract class Shape {
    int x, y;
    Color color;

    // ... методы и конструкторы

    // Нарисовать фигуру в графическом контексте
    abstract void draw(Graphics g);
}
```

Данный метод будет переопределен в каждом подклассе: `Line`, `Rectangle`, `Ellipse`.

Подкласс `Line` расширяет суперкласс `Shape`
```java
public class Line extends Shape {
    int x1, y1, x2, y2;

    // ... методы и конструкторы

    // Переопределение метода
    void draw(Graphics g) {
        g.setColor(color);
        g.drawLine(x1,y1,x2,y2);
    }
}
```

Подкласс `Rectangle` расширяет суперкласс `Shape`
```java
public class Rectangle extends Shape implements Scalable {
    // Поля
    private int width, height;

    // ... методы и конструкторы

    // Переопределение метода
    public void draw(Graphics g) {
        g.setColor(color);
        g.fillRect(x, y, width, height);
    }
}
```

Подкласс `Ellipse` расширяет суперкласс `Shape`
```java
public class Ellipse extends Rectangle {
    // ... методы и конструкторы

    // Переопределение метода
    public void draw(Graphics g) {
        g.setColor(color);
        g.drawOval(x, y, width, height);
    }
}
```

Таким образом метод «draw», объявленный в суперклассе, является единым интерфейсом. При этом каждый подкласс предоставляет собственную реализацию этого метода. Создадим объекты этих подклассов, наследование позволяет объявлять их с типом данных, определенным суперклассом. Однако поведение объектов определяется их классами. Поэтому отрисовка созданных графических фигур на графическом контексте выполняется корректно.
```java
// Создать линию
Shape line = new Line(100,200, 300, 300, Color.RED);

// Создать прямоугольник
Shape rect = new Rectangle(0, 0, 50, 100, Color.GRAY);

// Создать эллипс
Shape ellipse = new Ellipse(100, 100, 100, 100, Color.GREEN);

// Создать массив графических фигур
Shape shapes[] = {line, rect, ellipse};

// Нарисовать все графические фигуры 
for (Shape shape: shapes)
    shape.draw(g);
```

### Инкапсуляция

_Инкапсуляция_ — позволяет выделить в классе открытую часть (интерфейсы) и закрытую часть (реализацию).

Есть четыре уровня доступа к полям, методам и конструкторам:

|       Где доступно?      |    Закрытый     (private)    |    Пакетный     (по умолчанию)    |    Защищенный    (protected)    |    Открытый    (public)    |
|:------------------------:|:----------------------------:|:---------------------------------:|:-------------------------------:|:--------------------------:|
|     Класс                |     да                       |     да                            |     да                          |     да                     |
|     Пакет                |     нет                      |     да                            |     да                          |     да                     |
|     Пакет и подклассы    |     нет                      |     нет                           |     да                          |     да                     |
|     Любой класс          |     нет                      |     нет                           |     нет                         |     да                     |

К классам в целом возможно применить только два уровня доступа: открытый или пакетный (по умолчанию).

Как правило, поле объявляется закрытым (`private`) и сопровождается парой открытых (`public`) методов доступа: геттером (чтение значение) и сеттером (редактирование значение).

Добавление методов доступа в класс `Shape`:
```java
import java.awt.*;

public abstract class Shape {    
    private int x, y; // Координаты базовой точки    
    private Color color; // Цвет

    // Методы доступа
    public int getX() {
        return x;
    }
    public void setX(int x) {
        if (x >= 0 && x <= 1000)
            this.x = x;
    }
    public int getY() {
        return y;
    }
    public void setY(int y) {
        if (y >= 0 && y <= 1000)
            this.y = y;
    }
    public Color getColor() {
        return color;
    }
    public void setColor(Color color) {
        if (color != null)
            this.color = color;
    }

    // Конструктор
    Shape(int x, int y, Color color) {
        setX(x);
        setY(y);
        setColor(color);
    }

    // Методы
    void move(int x, int y) {
        setX(x);
        setY(y);
    }

    // Абстрактные методы

    // Нарисовать фигуру в графическом контексте
    abstract void draw(Graphics g);
}
```

Добавление методов доступа в класс `Rectangle`:
```java
import java.awt.*;

public class Rectangle extends Shape implements Scalable {
    // Ширина и высота
    private int width = 1, height = 1;

    // Методы доступа 
    public int getWidth() {
        return width;
    }
    public void setWidth(int width) {
        if (width >= MIN_WIDTH && width <= MAX_WIDTH)
            this.width = width;
    }
    public int getHeight() {
        return height;
    }
    public void setHeight(int height) {
        if (height >= MIN_HEIGHT && height <= MAX_HEIGHT)
            this.height = height;
    }

    // Конструктор
    // Переопределение абстрактных методов
}
```

## Задание

**Часть I**

- Разработать абстрактный класс `Shape` для представления графических фигур: в классе должны быть определены закрытые поля, открытые методы доступа, абстрактные методы и конструкторы.

- Разработать класс `Rectangle` для представления прямоугольников: класс должен быть унаследован от класса «Shape»; в классе должны быть определены закрытые поля, открытые методы доступа, методы и конструкторы, переопределение абстрактных методов из класса `Shape`.

**Часть II**

- Разработать класс `Line` для представления линий: класс должен быть унаследован от класса `Shape`; в классе должны быть определены поля, методы и конструкторы, переопределение абстрактных методов из класса `Shape`.

- Разработать класс `Ellipse` для представления эллипсов: класс должен быть унаследован от класса `Rectangle`; в классе должно быть переопределение абстрактных методов из класса `Shape`.

- Создать несколько объектов классов `Line`, `Rectangle` и `Ellipse`. Вывести созданные эллипсы в файл изображения.

**Часть III**

- Разработать суперкласс и два его подкласса, представляющие некоторые сущности (любые вещи реального мира или абстрактные понятия с отношением наследования между ними, за исключением графических фигур): в классах должны быть определены поля, методы и конструкторы, перегрузка методов и конструкторов, переопределение методов.

- Продемонстрировать создание и использование объектов разработанных классов.

## Вопросы
1.	Абстрактные методы
2.	Абстрактные классы
3.	Принципы ООП: Наследование
4.	Расширение классов
5.	Ключевое слово super
6.	Уровни доступа
7.	Принципы ООП: Инкапсуляция
8.	Принципы ООП: Полиморфизм
9.	Переопределение методов

## Ресурсы
1. Г. Шилдт. Java Руководство для начинающих. Главы 7-8
